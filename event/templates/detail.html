{% extends 'base.html' %}
{% import "bootstrap/form.html" as wtf %}

{% block content %}
{% block extra_head %}
<!-- For external CSS -->
<link rel="stylesheet" href= "{{ url_for('static',filename='styles/detail.css')}}" />
{% endblock %}  
<!-- flashes any messages to the user -->
{% with messages = get_flashed_messages() %}
{% if messages %} <!-- check if there are any messages -->
  <div class="container-fluid">
    <div class="row mt-3 mb-3">
      <div class="col-md-12">
      {% for message in messages %} <!--loop through the messages-->
        <div class="alert alert-info">{{ message }}</div> <!--display as alert-->
      {% endfor %}
    </div>
  </div>
</div>
{% endif %}
{% endwith %}

  <div class="grid-container">
  <div class="item1">
        <h5 class="title">{{ event.event_name }}</h5>
    </div>
    <div class="item6">
        <form class="d-flex form-inline" role="search">
            <button class="btn searchbtn" type="submit">
            Edit
            </button>
        </form>
    </div>
    <div class="item2 ">
        <img src="{{event.event_image}}" class="img-boxing w-100" alt="...">
    </div>
    <div class="item3">
        <p ><img src="node_modules/bootstrap-icons/icons/calendar3.svg" alt="">&nbsp &nbsp{{ event.date }}</p>
        <p ><img src="node_modules/bootstrap-icons/icons/clock.svg" alt="">&nbsp &nbsp{{ event.time }}</p>
        <p ><img src="node_modules/bootstrap-icons/icons/exclamation-circle.svg" alt="">&nbsp &nbsp{{ event.event_status }}</p>
        <p ><img src="node_modules/bootstrap-icons/icons/currency-dollar.svg" alt="">&nbsp &nbsp{{ event.event_price }}</p>
        <p ><img src="node_modules/bootstrap-icons/icons/geo-alt.svg" alt="">&nbsp &nbsp{{ event.event_location }}</p>
        <p ><img src="node_modules/bootstrap-icons/icons/hand-thumbs-up.svg" alt="">&nbsp &nbsp{{ event.event_rating }}</p>
    </div>
    <!-- description -->
    <div class="item4">
        <h5 class="list-title">About this Event</h5>
        <p>{{ event.event_description }}</p>
    </div>

    <div class="item7">      
      <div>
        {{wtf.render_form(orderForm,"/events/{0}/book".format(event.event_id))}} 
      </div>
    </div>

    <div class="item5">
      <div class="comment">                      
        <div class="card comment">
            <div class="p-3">
                <h5>Comments</h5>
            </div>
            <div class="row border-bottom">
              {{wtf.render_form(commentForm,"/events/{0}/comment".format(event.event_id))}} 
              {% for comment in event.comments %} 
              <div class="col-md-12">  
                  <b>{{ comment.user.user_name }}</b> <span class="ml-2 text-muted tex text-justify: right">{{ comment.comment_created_at }}</span>
                  <p>{{ comment.comment_text }}</p>  
              </div>  
              {% endfor %}
            </div>
        </div>  
      </div>
    </div>
  </div>
{% endblock %}